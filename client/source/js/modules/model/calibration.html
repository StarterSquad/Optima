
<div class="rich">

  <div class="grid" style="margin: 0px 0px;">
    <h1>Manual Calibration</h1>
  </div>

  <div class="error-hint" ng-show="isMissingData">
    No parameter sets, you need to <a ui-sref="home">upload a data spreadsheet</a> for this project.
  </div>

  <div ng-if="!isMissingData">
    <div class="3">
      <label for="programSet-selection">Select a parameter set:</label>
    </div>

    <div style="display: flex; justify-content: flex-start;">
      <select id="programSet-selection"
              name="programSet-selection"
              class="updateGraph txbox"
              ng-model="state.parset"
              ng-change="getCalibrationGraphs()"
              ng-options="parset.name for parset in parsets"
              style="width: 20%;">
      </select>
      <button ng-click="addParameterSet()" type="button" class="btn" style="margin-left:2%">New parameter set</button>
      <button ng-click="copyParameterSet()" type="button" class="btn" style="margin-left:2%">Copy parameter set</button>
      <button ng-click="renameParameterSet()" type="button" class="btn" style="margin-left:2%">Rename parameter set</button>
      <button ng-click="downloadParameterSet()" type="button" class="btn" style="margin-left:2%">Download parameter set</button>
      <button ng-click="uploadParameterSet()" type="button" class="btn" style="margin-left:2%">Upload parameter set</button>
      <button ng-click="deleteParameterSet()" type="button" class="btn" style="margin-left:2%">Delete parameter set</button>
    </div>

    <div
       style="
         padding-top: 10px;
         padding-bottom: 10px;">

      <button class="btn __m" ng-click="saveAndUpdateGraphs()">
        Save parameters
      </button>

      &nbsp;
      &nbsp;

      Run auto-fit for about
      &nbsp;
      <select ng-init="state.maxtime=10" ng-model="state.maxtime">
        <option value="10">10 seconds</option>
        <option value="30">30 seconds</option>
        <option value="60">1 minute</option>
        <option value="300">5 minutes</option>
        <option value="600">10 minutes</option>
        <option value="1800">30 minutes</option>
      </select>

      &nbsp;
      &nbsp;

      <button
          class="btn       &nbsp;"
          ng-click="startAutoCalibration()"
          ng-disabled="checkNotRunnable()">
        Autofit
      </button>

      &nbsp;
      &nbsp;

      <span style="color: #00aeef;"> {{ statusMessage }} </span>

    </div>

    <div
      style="
        display: flex;
        flex-direction: row;
        justify-content: space-between;
        width: 100%;
        height: calc(100vh - 300px)">

      <div class="small_bordered_list"
           style="flex: 0 0 320px;"
           ng-if="parameters.length > 0">
        <div class="option_list" style="height: 100%;">
          <div
              ng-repeat="parameter in parameters"
              style="justify-content: space-around"
              class="option">
            <span style="width: 45%">{{parameter.label}}</span>
            <span style="width: 45%">
              <input class="txbox __m"
                     type="number"
                     ng-model="parameter.value"/>
            </span>
          </div>
        </div>
      </div>

      <div
      style="
         margin-left: 10px;
         border: 1px solid #DDD;
         flex: 1 1 auto;
         height:100%;
         width: 100%;">
        <optima-graphs graphs="graphs"></optima-graphs>
      </div>

    </div>
  </div>
</div>
