<div class="rich">

  <div class="error-hint" ng-show="isMissingData">
    No parameter sets, you need to <a ui-sref="home">upload a data spreadsheet</a> for this project.
  </div>

  <div class="error-hint" ng-show="!isMissingData && isMissingProgset">
    Please <a ui-sref="programs.manageProgramSet">add programs to a program set</a>.
  </div>

  <div class="error-hint" ng-show="!isMissingData && !isMissingProgset && !isOptimizable">
    Programs not ready, you need to <a ui-sref="programs.define-cost-coverage-outcome">define cost and outcome functions</a>.
  </div>

  <div
      style="
        display: flex;
        flex-direction: column"
      ng-if="!isMissingData && isOptimizable && !isMissingProgset" >

    <div
        style="
          flex: 0 0 auto;">

      <div style="
            overflow: scroll;
            border: 0px solid #AAA;
            max-height: 300px;">
        <table
            class="table table-bordered table-hover table-striped"
            style="margin: 0; border: 0">
          <tr>
            <td>Name</td>
            <td>Select</td>
            <td>Type</td>
            <td>Parameter set</td>
            <td>Program set</td>
            <td>Manage</td>
          </tr>
          <tr ng-repeat="optimization in state.optimizations track by $index"
              ng-class="{highlighted: optimization.id === state.optimization.id}">
            <td>
              {{optimization.name}}
            </td>
            <td>
              <button
                  class="btn __green"
                  ng-click="setActiveOptimization(optimization)">
                Select
              </button>
            </td>
            <td>
              {{optimization.which}}
            </td>
            <td>
              {{getParsetName(optimization)}}
            </td>
            <td>
              {{getProgsetName(optimization)}}
            </td>
            <td>
              <i
                  ng-click="editOptimization(optimization)"
                  class="fa fa-pencil"
                  tp-text="Edit" tooltip tp-class="tooltip"
                  tp-x="-100" tp-y="-200" tp-anchor-x="0" tp-anchor-y="0"
                  style="margin-left: 0.5em">
              </i>
              <i
                  ng-click="copyOptimization(optimization)"
                  class="fa fa-copy"
                  tp-text="Copy" tooltip tp-class="tooltip"
                  tp-x="-100" tp-y="-200" tp-anchor-x="0" tp-anchor-y="0"
                  style="margin-left: 0.5em">
              </i>
<!--              <i
                  ng-click="downloadOptimization(optimization)"
                  class="fa fa-download"
                  tp-text="Download" tooltip tp-class="tooltip"
                  tp-x="-100" tp-y="-200" tp-anchor-x="0" tp-anchor-y="0"
                  style="margin-left: 0.5em">
              </i>
              <i
                  ng-click="uploadOptimization(optimization)"
                  class="fa fa-upload"
                  tp-text="Upload" tooltip tp-class="tooltip"
                  tp-x="-100" tp-y="-200" tp-anchor-x="0" tp-anchor-y="0"
                  style="margin-left: 0.5em">
              </i>-->
              <i
                  ng-click="deleteOptimization(optimization)"
                  class="fa fa-trash-o"
                  tp-text="Delete" tooltip tp-class="tooltip"
                  tp-x="-100" tp-y="-200" tp-anchor-x="0" tp-anchor-y="0"
                  style="margin-left: 0.5em">
              </i>
            </td>
          </tr>

        </table>
      </div>

      <div style="display:table;
            width: 100%;
            margin-top: 1em;
            margin-bottom: 1.5em;">
        <div style="display: table-row; width=100%">
          <div style="display: table-cell;">
            <button
              class="btn __green __m"
              ng-click="startOptimization(state.optimization)"
              ng-disabled="checkNotRunnable()">
              Optimize
            </button>
            &nbsp; for &nbsp;
            <select ng-init="state.maxtime=10" ng-model="state.maxtime">
              <option value="10">10 seconds</option>
              <option value="30">30 seconds</option>
              <option value="60">1 minute</option>
              <option value="300">5 minutes</option>
              <option value="600">10 minutes</option>
              <option value="1800">30 minutes</option>
            </select>
            &nbsp;
          <span style="color: #00aeef; margin-top: 25px; margin-left: 15px">
            {{ statusMessage }}
          </span>

            <div class="error-hint" ng-show="isMissingProgset">
              Please <a ui-sref="programs.manageProgramSet">add programs to a program set</a> for budget and coverage scenario.
            </div>
            <div class="error-hint" ng-show="!isMissingProgset && !isOptimizable">
              Programs not ready, you need to <a ui-sref="programs.define-cost-coverage-outcome">define cost and outcome functions</a>.
            </div>
          </div>
          <div style="display: table-cell; text-align: right">
            <input
              type="button"
              value="Add money optimization"
              class="btn"
              ng-click="addOptimization('money')">
            &nbsp;
            <input
              type="button"
              value="Add outcomes optimization"
              class="btn"
              ng-click="addOptimization('outcomes')">
          </div>
          </div>
        </div>
      </div>

    <div
      ng-if="state.graphs"
      style="
        margin-top: 1em;
        flex: 1 1 auto;
        border: 1px solid #DDD;
        height:100%;
        width: 100%;
        overflow:auto">
      <optima-graphs graphs="state.graphs"></optima-graphs>
    </div>
  </div>
</div>