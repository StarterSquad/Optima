<div class="rich">
  <div class="section" ng-show="projects.length">
    <h3>Available projects:</h3>

    <form>
      <div class="form-group">
        <div class="input-group">
          <div class="input-group-addon"><i class="fa fa-search"></i></div>

          <input type="text" class="form-control" placeholder="Filter Projects" ng-model="searchTerm">

        </div>
      </div>
    </form>

    <table class="table table-bordered table-hover table-striped" style="width: auto">
      <thead>
      <tr>
        <th ng-click="updateSorting('name')">
          Name
          <span ng-show="sortType == 'name' && !sortReverse" class="fa fa-caret-down"></span>
          <span ng-show="sortType == 'name' && sortReverse" class="fa fa-caret-up"></span>
        </th>
        <th ng-click="updateSorting('populations.length')">
          Populations
          <span ng-show="sortType == 'populations.length' && !sortReverse" class="fa fa-caret-down"></span>
          <span ng-show="sortType == 'populations.length' && sortReverse" class="fa fa-caret-up"></span>
        </th>
        <th ng-click="updateSorting('programs.length')">
          Programs
          <span ng-show="sortType == 'programs.length' && !sortReverse" class="fa fa-caret-down"></span>
          <span ng-show="sortType == 'programs.length' && sortReverse" class="fa fa-caret-up"></span>
        </th>
        <th ng-click="updateSorting('creation_time')">
          Created on
          <span ng-show="sortType == 'creation_time' && !sortReverse" class="fa fa-caret-down"></span>
          <span ng-show="sortType == 'creation_time' && sortReverse" class="fa fa-caret-up"></span>
        </th>
        <th ng-click="updateSorting('updated_time')">
          Updated on
          <span ng-show="sortType == 'updated_time' && !sortReverse" class="fa fa-caret-down"></span>
          <span ng-show="sortType == 'updated_time' && sortReverse" class="fa fa-caret-up"></span>
        </th>
        <th colspan="7">Actions</th>
      </tr>
      </thead>
      <tbody>
      <tr ng-repeat="project in projects | orderBy:sortType:sortReverse | filter:filterByName">
        <td>
          {{ ::project.name }}
        </td>
        <td>
          {{ ::project.populations.length }}
        </td>
        <td>
          {{ ::project.programs.length }}
        </td>
        <td>
          {{ ::project.creation_time| date:'yyyy-MM-dd HH:mm:ss'}}
        </td>
        <td>
          {{ ::project.updated_time ? (project.updated_time | date:'yyyy-MM-dd HH:mm:ss') : 'No modification'}}
        </td>
        <td>
          <button class="btn __green" ng-click="open(project.name, project.id)">Open project</button>
        </td>
        <td>
          <button class="btn" ng-click="copy(project.name, project.id)">Copy project</button>
        </td>
        <td>
          <button class="btn" ng-click="edit(project.name, project.id)">Edit project</button>
        </td>
        <td>
          <button class="btn __red" ng-click="remove($event, project.name, project.id, $index)">Delete project</button>
        </td>
        <td>
          <button class="btn" ng-click="getData(project.name, project.id)">Download project</button>
        </td>
        <td>
          <button class="btn" ng-click="preSetData(project.name, project.id)">Upload project</button>
        </td>
        <td>
          <button class="btn" ng-click="workbook(project.name, project.id)">Download data entry spreadsheet</button>
        </td>
      </tr>
      </tbody>
    </table>
  </div>

  <div ng-hide="projects.length">
    <h3>No projects found</h3>

    There are no projects found. Please <a ui-sref="project.create({})">create a project</a> first.
  </div>
</div>
