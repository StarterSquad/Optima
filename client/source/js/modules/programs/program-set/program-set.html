
<div class="rich" style="max-width: 900px">

  <div class="error-hint" ng-show="isMissingData">
    No parameter sets, you need to <a ui-sref="home">upload a data spreadsheet</a> for this project.
  </div>

  <div ng-if="!isMissingData">

    <div style="float: right; text-align: right">
      Program set: &nbsp;

      <select
          class="txbox"
          ng-model="state.activeProgramSet"
          ng-options="p.name for p in programSetList"
          style="width: 150px; display: inline">
      </select>

      <a ng-include="'js/modules/common/icon-new.html'"    ng-click="addProgramSet()"></a>
      <a ng-include="'js/modules/common/icon-edit.html'"   ng-click="renameProgramSet()"></a>
      <a ng-include="'js/modules/common/icon-copy.html'"   ng-click="copyProgramSet()"></a>
      <a ng-include="'js/modules/common/icon-delete.html'" ng-click="deleteProgramSet()"></a>
      <a ng-include="'js/modules/common/icon-help.html'" ng-click="openHelp('program-set')"></a>
    </div>

    <h2>Manage programs
      <a ng-include="'js/modules/common/icon-help.html'" ng-click="openHelp('programs')"></a>
    </h2>

    <div
        class="6"
        ng-if="state.activeProgramSet.programs && state.activeProgramSet.programs.length > 0"
        style="padding-top: 1em">

      <div class="section" ng-repeat="category in getCategories()">
        <table class="section table table-bordered">
          <tr>
            <td colspan="5"><b>{{category}}</b></td>
          </tr>
          <tr>
            <td><b>Active</b></td>
            <td><b>Name</b></td>
            <td><b>Short name</b></td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
          </tr>
          <tr ng-repeat="program in state.activeProgramSet.programs | orderBy : 'name'" ng-if="program.category==category">
            <td class="text-center" style="width: 50px">
              <input type="checkbox" ng-change="saveActiveProgramSet('Program set updated')" ng-model="program.active">
            </td>
            <td style="width: 450px">{{ program.name }}</td>
            <td style="width: 300px">{{ program.short }}</td>
            <td>
              <button type="button" class="btn" ng-click="openEditProgramModal($event, program)">Edit</button>
            </td>
            <td>
              <button type="button" class="btn" ng-click="copyProgram($event, program)">Copy</button>
            </td>
          </tr>
        </table>
        </td>
      </div>
      <button type="button" class="btn" ng-click="openAddProgramModal($event)">Add program</button>
    </div>
  </div>
</div>
